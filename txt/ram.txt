Pomocné programy
RAM Doubler for Windows
MS Windows mají do dokonalého operačního systému daleko. Zatímco takové zjištění už jistě znechutilo nejednoho s nadšením začínajícího uživatele, nejrůznějším systémovým programátorům otevírá nebývalé pole působnosti. Objevují se nejrůznější berličky, s jejichž pomocí se zapálení jedinci snaží obyčejným uživatelům práci v tomto prostředí přece jen poněkud usnadnit. S takovým záměrem byl vyvinut i produkt, který slibuje zdvojnásobení paměťové kapacity pro okenní aplikace. Společně se na něj nyní podíváme.

Konec hlášky “Nedostatek paměti” v MS Windows

Možná vás teď napadá, zda vůbec má cenu ještě se zabývat kříšením “starých” Windows, když Windows 95, slibující mimochodem napravit vše, co bylo ve Windows 3.1/3.11 špatné, a ještě něco navíc, doslova klepou na dveře. Podle mého skromného odhadu to cenu má, neboť Windows 95 už, jak známo, na ty dveře klepou pěkně dlouho. A ani pak není jisté, zda se po instalaci zbrusu nových Windows pro změnu zase nerozklepe sám uživatel a nevrátí se pokoutně k těm “starým”. A konečně - i kdyby vše dopadlo tak, jak si programátoři Microsoftu ve svých reklamních letácích a večerních modlitbách tiše přejí, ani pak není jisté, zda se průměrně naštvanému uživateli bude do nějakých “horkých” novinek vůbec chtít. Takže to bychom měli trochu toho nezávislého filozofování na úvod a nyní už pojďme k vlastnímu produktu RAM Doubler.

Instalace
Stejně jako u většiny programů pro Windows, i v tomto případě probíhá instalace naprosto bez problémů. Velice příjemně mne překvapilo, že dodávaný instalační program umí kromě vlastní instalace ještě odstranit RAM Doubler z prostředí Windows. I přesto, že se to dá udělat pouhým odstraněním ovladače ramdublr.386 ze sekce 386Enh v souboru system.ini, je tato funkce jistě velice vítaná a nejeden výrobce současných aplikací pro Windows by si z ní mohl vzít příklad.
V souvislosti s instalací bych se ještě rád zmínil o jedné záludnosti. Jde o dočasné potlačení funkce RAM Doubleru. Je to možné, jak praví manuál, provést stiskem klávesy Esc během startu Windows. Následující okenní seance pak bude probíhat bez účasti tohoto programu. To je sice pěkné, ale nikde se už v manuálu neříká, co to “během startu Windows” vlastně znamená. A opravdu, onen časový úsek, kdy je třeba stisknout zmíněnou klávesu, je velice specifický a dá se říci, že nastává téměř ihned po spuštění programu win.com. Uvědomíme-li si, že se celý popisovaný produkt do systému zařazuje jako ovladač, pak je celkem logické, že jediný okamžik, kdy může tento program stisknutou klávesu Esc “vidět”, je právě v okamžiku jeho instalace. A ta na rychlejších počítačích nastává po čertech brzo. Proto zde tedy na tento detail (na první pohled nepatrný) raději upozorňuji, neboť sám na sobě jsem si vyzkoušel, že je lepší v případě potřeby klávesu Esc držet od té chvíle, kdy napíšeme win a dáme Enter (pokud to samozřejmě nebude vadit jinému instalovanému ovladači).

Co to umí
Nejdříve upoutá pozornost každého přiložený letáček, který se doslova hemží samými reklamními úryvky typu “Dříve jsem mohl na svém počítači s tolika a tolika MB RAM spouštět pouze program XY, zatímco si teď na něm mohu spustit, co mě jen napadne...”. Pomineme-li jistou podobnost s reklamou typu “Dříve jsem prala s...”, zdá se být zdvojnásobení celé dostupné RAM přece jen trošičku přitažené za vlasy. A opravdu, vlastní anglicky psaný manuál je už o poznání upřímnější a sděluje, že RAM Doubler bojuje s Windows  na třech frontách.
Asi nejužitečnější je první způsob rozšíření: tím je úklid a lepší správa systémové haldy. Tato část je snad nejpalčivějším problémem Windows při současném spuštění více aplikací. Každá spuštěná aplikace totiž vyžaduje určitou část systémových prostředků, přičemž některé z těchto požadavků trvají i v době, kdy uživatel pracuje se zcela jiným programem. To by ještě nebylo tak zlé, kdyby kapacita těchto systémových prostředků nebyla pouhých 64 KB bez ohledu na velikosti vlastní RAM. Z toho je tedy zřejmé, že při spuštění několika aplikací “šitých procesoru P6 na míru” bude zanedlouho paměť systémových prostředků vyčerpána. Přidáním další RAM, jak jsme si už řekli, kromě pocitu, že jsme svůj měsíční plat mohli investovat mnohem lépe, nezískáme vůbec nic. Jediná šance, jak situaci řešit, spočívá ve vlastní správě systémové haldy. A právě to je jedna z hlavních činností popisovaného produktu. Bohužel architektura Windows není tak benevolentní, aby bylo možné rozšířit velikost haldy neomezeně. RAM Doubler proto spoléhá - kromě drobnějšího rozšíření - spíš na preciznější správu a úklid této oblasti. Výsledky jeho snažení jsou v podstatě podobné, jako když na svůj disk instalujeme například Stacker. Je-li konstelace dat na haldě příznivá, pak může být snažení RAM Doubleru korunováno až zdvojnásobením této oblasti. Jindy může být výsledný efekt zase o něco menší. Konkrétní představu o tom, jak asi je nová správa paměti účinná, si můžeme utvořit na základě připojené tabulky. Ta postupně zachycuje klesání velikosti systémových prostředků v závislosti na počtu a hlavně typu spuštěných aplikací. Pro srovnání je vždy v jednom sloupci uveden stav těchto prostředků bez instalovaného RAM Doubleru a v druhém s ním. Z počátku sice Windows s novou paměťovou správou vedou proti těm obyčejným, ale zase ne tak dramaticky. Teprve při vytížení zhruba na 50 % se úbytek systémových prostředků v prostředí s touto správou paměti výrazně zpomalí a proti klasickým Windows dále klesá už jen nepatrně. Bohužel mně na více programů nestačila operační paměť, nicméně je velice pravděpodobné, že úbytek těchto prostředků se díky RAM Doubleru opravdu přibrzdil natolik, že pokud bychom pokračovali až do stavu naprostého vyčerpání, nejspíše bychom opravdu zjistili, že velikost systémové haldy se zdvojnásobila. Proč má závislost volných prostředků na počtu běžících programů takto výrazně nelineární charakter, se dá vysvětlit v zásadě dvojím způsobem. Jednak za to může nejspíše vlastní algoritmus, pomocí něhož tento program řídí správu systémové haldy, jednak to může být způsobeno i chybou diagnostických programů, které, pokud jsou psány klasickým Windows přímo “na tělo”, mohou vykazovat drobnější odchylky od skutečných hodnot.
Druhou ze strategií, majících za cíl odstranit problémy s nedostatkem paměti, je nová správa “prvního” megabajtu RAM. Ačkoliv Windows už na většině současných počítačů běží v chráněném režimu a mají tak k dispozici celý fyzický paměťový prostor, i přesto je paměť pod onou magickou hranicí jednoho megabajtu stále kritická. Při troše štěstí se může stát, že se tato oblast zaplní nejrůznějšími ovladači a vlastní aplikace pak nebudou schopny pracovat s knihovnami VBX či podobně. Stejně jako v případě systémových prostředků, i zde se program RAM Doubler snaží vhodnou správou paměti takovým situacím předcházet.
Poslední taktika, kterou program používá, vypadá na první pohled velice odvážně a spočívá v komprimaci těch segmentů paměti, u nichž je předpoklad, že se nebude delší dobu žádná z aplikací požadovat. Zkušenějšího uživatele asi napadá otázka, proč tolik starostí, když samotná Windows jsou schopna v případě potřeby dlouho nepoužívané bloky paměti buď zcela zrušit, nebo je přemístit do odkládacího souboru na pevném disku. Odpověď na tuto otázku je velice jednoduchá, neboť komprese nepoužívaných segmentů se odrazí na celkové průchodnosti systému. Ono totiž i přes úctyhodné rychlosti současných pevných disků kopírování řekněme dvou megabajtů dat na disk - a v případě potřeby zase zpátky - přece jen zdrží. Budou-li však nepotřebná data místo úklidu na disk nejdříve zkomprimována a teprve až později v případě nevyhnutelné potřeby odložena na disk, vlastní průchodnost celého systému se jistě zvýší. Ale ani s kompresí se to nesmí příliš přehánět, neboť složitější algoritmy by zcela jistě znamenaly i větší nároky na čas procesoru, a tím by mohla celková průchodnost systému ve srovnání s prostým odkládáním naopak mnohonásobně klesnout. Jak se však zdá, v případě RAM Doubleru byl daný algoritmus zvolen opravdu citlivě, takže se projevuje jen kladně. Je však třeba poznamenat, že od této úpravy v žádném případě nemůžeme očekávat nějaké drastické zvýšení výkonu svého počítače. Je ovšem pravda, že ono tolik nepříjemné “kroužení” pevného disku se při přepínání aplikací ozývá opravdu méně.

Jak to pracuje
Asi se vám nyní - stejně jako mně v době, kdy jsem tento program držel poprvé v ruce - vkrádá na mysl otázka, jakpak to asi celé funguje. Kromě dvou knihoven, které se však, jak se po bližším prozkoumání ukázalo, uplatňují pouze během instalace, se celý program skládá v podstatě z jednoho jediného ovladače ramdublr.386. Ten se instaluje spolu s ostatními ovladači chráněného režimu při startu Windows. To samo o sobě je velice dobrý tah, protože instalace ovladačů tohoto typu je ve Windows kupodivu poměrně spolehlivá a navíc tyto ovladače běží s úrovní oprávnění “nula”, takže mohou provádět jakékoliv zásahy kamkoliv. A to je přesně to, co tento program potřebuje. Vlastní algoritmy a způsoby správy paměti celého ovladače jsem už dále nezkoumal, neboť by s největší pravděpodob- ností do celé záležitosti příliš velké světlo nevnesly. Interní algoritmy programu by se totiž, myslím, daly velice výstižně shrnout slovy “To nechci vidět!”. A opravdu, i přes veškeré úsilí autorů, které svému programu jistě věnovali, mohou nastat situace, kdy celé prostředí Windows nekontrolovatelně zamrzne. Naštěstí se to ale nestává příliš často (alespoň mně ne).

Závěr
Z předchozích řádek, myslím, jasně vyplynulo, že ačkoliv idea zdvojnásobení celkové kapacity RAM, kterou mohou některé reklamní slogany navodit, patří opravdu spíše do žánru sci-fi, přece jen může RAM Doubler najít v počítačích řady uživatelů své pevné místo. Jeho funkce totiž velice názorně ukazuje, že propracovanější správa kritických míst systému může mít v konečném součtu stejný efekt, jako kdybychom přidali další fyzickou paměť.
Tomáš Rosa
